<!DOCTYPE html>
<html>
<head>
    <title>é­”æ³•é—¨è¯­éŸ³æŒ‘æˆ˜</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #2c3e50;
            color: white;
            font-family: Arial, sans-serif;
        }

        #door {
            width: 800px;
            transition: all 2s ease;
            margin: 20px;
        }

        button {
            padding: 15px 30px;
            font-size: 20px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 20px;
        }

        #hint {
            font-size: 24px;
            margin: 20px;
            text-align: center;
        }

        #status {
            font-size: 18px;
            color: #e74c3c;
        }
    </style>
</head>
<body>
    <img id="door" src="close.png" alt="é­”æ³•é—¨">
    <div id="hint">ç‚¹å‡»æŒ‰é’®è¯´å‡ºæš—å·</div>
    <button id="startBtn">è¯´å‡ºæš—å·</button>
    <div id="status"></div>

    <script>
        const challenges = [
            { 
                question: "å¤©ç‹ç›–åœ°è™",
                answer: "å°é¸¡ç‚–è˜‘è‡",
                hint: "è¯´å‡ºæš—å·ï¼šå¤©ç‹ç›–åœ°è™"
            },
            {
                question: "ç­‰é—²è¯†å¾—ä¸œé£é¢",
                answer: "ä¸‡ç´«åƒçº¢æ€»æ˜¯æ˜¥",
                hint: "è¯´å‡ºæš—å·ï¼šç­‰é—²è¯†å¾—ä¸œé£é¢"
            },
            {
                question: "é•¿æ²™å¸‚ç«‹ä¿¡ä¸­å­¦æ ¡è®­",
                answer: "ç´è°±",
                hint: "è¯´å‡ºæ ¡è®­ï¼šé•¿æ²™å¸‚ç«‹ä¿¡ä¸­å­¦æ ¡è®­"
            },
            {
                question: "æ­å–œä½ å‰é¢ä¸‰æ¬¡éƒ½ç­”å¯¹äº†ï¼Œè¯·è¯´å‡ºç»ˆææš—å·å§ã€‚",
                answer: "èŠéº»å¼€é—¨",
                hint: "ç»ˆææš—å·ï¼šè¯´å‡ºé­”æ³•å’’è¯­"
            }
        ];

        let currentChallenge = 0;
        const door = document.getElementById('door');
        const hint = document.getElementById('hint');
        const status = document.getElementById('status');
        const startBtn = document.getElementById('startBtn');

        // åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (SpeechRecognition) {
            const recognition = new SpeechRecognition();
            recognition.lang = 'zh-CN';
            recognition.continuous = false;
            recognition.interimResults = false;

            recognition.onresult = (event) => {
                const result = event.results[0][0].transcript.trim();
                checkAnswer(result);
            };

            recognition.onerror = () => {
                status.textContent = 'è¯­éŸ³è¯†åˆ«é”™è¯¯ï¼Œè¯·é‡è¯•';
            };

            startBtn.addEventListener('click', () => {
                status.textContent = 'æ­£åœ¨è†å¬...';
                recognition.start();
                hint.textContent = challenges[currentChallenge].hint;
            });
        } else {
            status.textContent = 'æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«ï¼Œè¯·ä½¿ç”¨æœ€æ–°ç‰ˆChrome';
        }

        function checkAnswer(answer) {
            const correct = challenges[currentChallenge].answer;
            // ä¿®æ”¹ä¸ºåŒ…å«æ£€æµ‹
            if (answer.includes(correct)) {  // ä¸»è¦ä¿®æ”¹ç‚¹
                status.textContent = 'æš—å·æ­£ç¡®ï¼';
                currentChallenge++;
                
                if (currentChallenge >= challenges.length) {
                    openDoor();
                } else {
                    setTimeout(() => {
                        hint.textContent = challenges[currentChallenge].hint;
                        status.textContent = '';
                    }, 1500);
                }
            } else {
                status.textContent = 'æš—å·é”™è¯¯ï¼Œè¯·é‡è¯•ï¼';
            }
        }

        function openDoor() {
            door.style.transform = 'rotateY(180deg)';
            hint.textContent = 'ğŸ‰ é­”æ³•é—¨å·²å¼€å¯ï¼ğŸ‰';
            startBtn.style.display = 'none';
            status.textContent = '';
            // å®é™…ä½¿ç”¨æ—¶éœ€è¦æ›¿æ¢å¼€é—¨å›¾ç‰‡
            door.src = 'open.png';
        }
    </script>
</body>
</html>